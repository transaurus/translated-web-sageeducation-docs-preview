---
sidebar_position: 2
title: "🎙️ Troubleshooting Microphone Access"
---

アプリケーションが適切にマイクにアクセスできるようにすることは、音声入力に依存する機能にとって重要です。このガイドでは、特にセキュアコンテキスト下でのマイクの権限管理とトラブルシューティングについて説明します。

## セキュアコンテキストの理解 🔒

セキュリティ上の理由から、マイクへのアクセスはHTTPSで提供されるページ、または`localhost`からのローカル接続に制限されています。この要件は、データが安全なチャネルを介して送信されることを保証することで、データを保護することを目的としています。

## 一般的な権限の問題 🚫

Chrome、Brave、Microsoft Edge、Opera、Vivaldiなどのブラウザ、およびFirefoxは、非HTTPS URLでのマイクアクセスを制限しています。これは通常、同じネットワーク内の別のデバイス（例えば、モバイル端末からデスクトップサーバーにアクセスする場合）からサイトにアクセスする際に問題となります。以下はこれらの問題を管理する方法です：

### 非HTTPS接続の解決策

1. **HTTPSの設定:**
   - サーバーをHTTPS対応に設定することを強く推奨します。これにより、権限の問題が解決されるだけでなく、データ送信のセキュリティも向上します。

2. **一時的なブラウザフラグ（注意して使用）:**
   - これらの設定により、特定の安全でないURLを安全なものとして扱うようにブラウザに強制します。これは開発目的には便利ですが、重大なセキュリティリスクを伴います。主要なブラウザでの設定方法は以下の通りです：

   #### Chromiumベースのブラウザ（例: Chrome、Brave）
   - `chrome://flags/#unsafely-treat-insecure-origin-as-secure`を開きます。
   - 非HTTPSアドレス（例: `http://192.168.1.35:3000`）を入力します。
   - ブラウザを再起動して変更を適用します。

   #### Firefoxベースのブラウザ
   - `about:config`を開きます。
   - `dom.securecontext.allowlist`を検索して変更（または作成）します。
   - カンマ区切りでIPアドレスを追加します（例: `http://127.0.0.1:8080`）。

### 考慮事項とリスク 🚨

ブラウザフラグは迅速な解決策を提供しますが、重要なセキュリティチェックをバイパスするため、デバイスやデータを脆弱性にさらす可能性があります。特に本番環境を計画する際は、適切なセキュリティ対策を優先してください。

これらのベストプラクティスに従うことで、アプリケーションがマイクに適切にアクセスしながら、データのセキュリティと整合性を維持することができます。